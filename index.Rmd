---
title: "SQL"
output: html_document
---
## Filtering Rows and Columns

In SQL, you can filter columns by using SELECT and rows by using WHERE. Let's look at an example using the Lahman baseball database. First, we should load the Lahman package.We will also need the sqldf package. 

```{r message=FALSE, warning=FALSE}
library(Lahman)
library(sqldf)
```

Let's take a look at an example.Suppose we want to see the home run totals for the 1927 Yankees. We could write:

```{r}
query<-"SELECT playerID,teamID,yearID,HR from Batting WHERE teamID='NYA' and yearID=1927"
sqldf(query)
```

Let's find all instances where Yankee players have hit 40 or more homeruns in a season:

```{r}
query<-"SELECT playerID,teamID,yearID,HR from Batting WHERE teamID='NYA' and HR>=40"
sqldf(query)
```

Now let's find all instances where a MLB player had over 40 homeruns but fewer than 60 strikeouts:

```{r}
query<-"SELECT playerID,teamID,yearID,HR,SO from Batting WHERE HR>40 and SO<60"
sqldf(query)
```

Finally, let's find all the instances of Phillies players who hit more than 30 homeruns in a season in the 1970's:

```{r}
query<-"SELECT playerID,teamID,yearID,HR from Batting WHERE HR>30 and yearID>=1970 and yearID<=1979 and teamID='PHI'"
sqldf(query)
```

## ORDER BY

With SQL we can also order the rows in the output. For example, suppose you want to see every instance of a player hitting over 50 homeruns, but you want to see the hitters with the most homeruns appear at the top. We can do that like this:

```{r}
query<-"SELECT playerID,yearID,teamID,HR FROM Batting WHERE
HR>50
ORDER BY HR DESC"

sqldf(query)
```

